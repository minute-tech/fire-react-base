rules_version = '2';
service cloud.firestore {
    match /databases/{database}/documents {
        // No one can update, delete, read, or list but everyone can create
        match /messages/{messageId} {
            allow update, delete, read, list: if false;
            allow create: if true;
        }

        // No one can delete, only true user can update, read, or list, and anyone can create
        match /users/{userId} {
            function isTrueUser() {
                return userId == request.auth.uid;
            }
            
            allow delete: if false;
            allow update, read, list: if isTrueUser();
            allow create: if true;
        }
    }
}